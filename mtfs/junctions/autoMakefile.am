AUTOMAKE_OPTIONS = foreign

ALWAYS_SUBDIRS := 
JUNCTION_SYNC_REPLICA_EXT_SUBDIRS := sync_replica_ext
JUNCTION_ASYNC_REPLICA_EXT2_SUBDIRS := async_replica_ext2
JUNCTION_SYNC_REPLICA_TMPFS_SUBDIRS := sync_replica_tmpfs
JUNCTION_SYNC_REPLICA_NFS_SUBDIRS := sync_replica_nfs
JUNCTION_SYNC_REPLICA_NTFS3G_SUBDIRS := sync_replica_ntfs3g
JUNCTION_SYNC_TRACE_EXT2_SUBDIRS := trace_ext2

SUBDIRS := $(ALWAYS_SUBDIRS)

if JUNCTION_SYNC_REPLICA_EXT
SUBDIRS += $(JUNCTION_SYNC_REPLICA_EXT_SUBDIRS)
endif

if JUNCTION_ASYNC_REPLICA_EXT2
SUBDIRS += $(JUNCTION_ASYNC_REPLICA_EXT2_SUBDIRS)
endif

if JUNCTION_SYNC_REPLICA_TMPFS
SUBDIRS += $(JUNCTION_SYNC_REPLICA_TMPFS_SUBDIRS)
endif

if JUNCTION_SYNC_REPLICA_NFS
SUBDIRS += $(JUNCTION_SYNC_REPLICA_NFS_SUBDIRS)
endif

if JUNCTION_SYNC_REPLICA_NTFS3G
SUBDIRS += $(JUNCTION_SYNC_REPLICA_NTFS3G_SUBDIRS)
endif

if JUNCTION_TRACE_EXT2
SUBDIRS += $(JUNCTION_SYNC_TRACE_EXT2_SUBDIRS)
endif

DIST_SUBDIRS := $(ALWAYS_SUBDIRS) $(JUNCTION_SYNC_REPLICA_EXT_SUBDIRS) $(JUNCTION_ASYNC_REPLICA_EXT2_SUBDIRS)
DIST_SUBDIRS += $(JUNCTION_SYNC_REPLICA_TMPFS_SUBDIRS) $(JUNCTION_SYNC_REPLICA_NFS_SUBDIRS)
DIST_SUBDIRS += $(JUNCTION_SYNC_TRACE_EXT2_SUBDIRS) $(JUNCTION_SYNC_REPLICA_NTFS3G_SUBDIRS)

EXTRA_DIST = 